# مبانی API

با API کیوآرپی می‌توانید پرداخت و مدیریت حساب را خودکار کنید.

## احراز هویت
- کلیدهای مشتری را از **توسعه‌دهنده → کلیدهای API** دریافت کنید.
- با استفاده از گرنت client credentials به `POST /oauth/token` درخواست بفرستید.
- توکن دریافت‌شده را در هدر `Authorization: Bearer` ارسال کنید.

## <a id="rate-limits"></a>محدودیت فراخوان
- پلن استاندارد: **۱۲۰ درخواست در دقیقه** برای هر کلید.
- پلن سازمانی: قابل تنظیم تا **۶۰۰ درخواست در دقیقه**.
- تجاوز از حد مجاز پاسخ ۴۲۹ به همراه هدر `Retry-After` برمی‌گرداند.

## <a id="error-handling"></a>مدیریت خطا
- خطاها از الگوی RFC 7807 تبعیت می‌کنند.
- مقدار `trace_id` را ثبت کنید؛ تیم پشتیبانی برای بررسی به آن نیاز دارد.
- فقط عملیات ایندمپوتن مانند `POST /payments/{id}/capture` را تکرار کنید.

## <a id="api-authentication"></a>تفکیک محیط‌ها
برای تست از دامنه سندباکس `https://sandbox.qrpay/api` استفاده کنید. کلیدهای تولید به سندباکس دسترسی ندارند.

### ابزارها
با استفاده از مستند OpenAPI موجود در `/developer/docs/openapi.json` کلاینت تایپ‌دار تولید کنید.
